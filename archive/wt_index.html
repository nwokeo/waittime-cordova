<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>California DMV Wait Times</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.scrollzer.min.js"></script>
		<script src="js/jquery.scrolly.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
		<script src="map.js"></script>
        
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <!--
        <script type="text/javascript" charset="utf-8">
        // Wait for device API libraries to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // device APIs are available
        //
        function onDeviceReady() {
            navigator.geolocation.getCurrentPosition(onSuccess, onError);
        }

        // onSuccess Geolocation
        //
        function onSuccess(position) {
            var element = document.getElementById('formValueId');
            element.setAttribute("placeholder", position.coords.latitude + ' ' + position.coords.longitude);
            //on target click:
            element.value = position.coords.latitude + ',' + position.coords.longitude;
        }

        // onError Callback receives a PositionError object
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' +
                  'message: ' + error.message + '\n');
        }

        </script>
        -->
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
    
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
		
		<style>
	      html, body {
	        height: 100%;
	        margin: 0;
	        padding: 0;
	      }
	
	      #map-canvas {
	        height: 300px;
	        width: 100%;
	        
	      }
          /*
          input {
            background-image: url(images/marker-16.png);
            background-position: 10px center;
            background-repeat: no-repeat;
            border: 1px solid #ccc;

            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            -ms-border-radius: 4px;
            -o-border-radius: 4px;
            border-radius: 4px;

            padding: 10px 5px;
            text-indent: 20px;

            -webkit-transition: all 0.2s;
            -moz-transition: all 2s;
            transition: all 0.2s;

            width: 90px;
        }

        input:focus {
            background-position: -20px center;
            text-indent: 0;
            width: 50%;
        }
        */

	    </style>
	</head>
	<body>
		<div id="wrapper">
            <!-- Header -->
            <section id="header" class="skel-layers-fixed">
                <header>
                    <span class="image avatar"><img src="" alt="" /></span>
                    <h1 id="logo"><a href="#">DMV Wait Times</a></h1>
                </header>
                <nav id="nav">
                    <ul>
                        <li><a href="#predict" class="active">Fastest Line</a></li>
                    </ul>
                </nav>
            </section>

            <!-- Main -->
            <div id="main">		   	
                <!-- Predict Form -->
                <section id="predict">
                    <div class="container">
                        <h3>What's the Best Office to Visit Right Now?</h3>
                        <div id="content-pane">
                          <div id="inputs">
                            <form>
                                <input type="text" placeholder="Search Zip Code or Address..." id="formValueId"/> 
                                
                                <button type="button" id="searchButton"/>Search</button> <button type="button" id="getLoc"/><img src="images/marker-16.png"</img>Current Location</button>
                            </form>
                          </div>
                          <div id="outputDiv">
                              <table style="display: none" id="results"> <!-- cellspacing = "0px" cellpadding = "20px" text-align = "center" -->
                                <thead>
                                    <tr>
                                        <td>Destination</td><td>Distance</td><td>Drive Time</td><td>Wait Time</td><td>Total Time</td>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                          </div>
                        </div>
                        <div id="map-canvas"></div>
                    </div>
                </section>
            </div> <!-- /main -->
		</div> <!-- /wrapper -->

		<script>
			$(document).ready(function() {


                // onError Callback receives a PositionError object
                //
                function onError(error) {
                    alert('code: '    + error.code    + '\n' +
                          'message: ' + error.message + '\n');
                }
                
                
			    $('#searchButton').click(function() {
                    //if nothing is entered, default location is used.
			      	callHaversine($('#formValueId').val());
  					$( "#results" ).show( "slow" );
			    });
                
                $('#getLoc').click(function() {
                    navigator.geolocation.getCurrentPosition(onSuccess, onError);
                    function onSuccess(position) {
                        var element = document.getElementById('formValueId');
                        element.setAttribute("placeholder", position.coords.latitude + ' ' + position.coords.longitude);
                        element.value = position.coords.latitude + ',' + position.coords.longitude;
                        
                        callHaversine($('#formValueId').val());
  					     $( "#results" ).show( "slow" );
                    }

			    });
			    
				$('#formValueId').keypress(function(e){ //TODO: refreshes page when called. why?
			        if(e.which == 13){ //Enter key
			            callHaversine($('#formValueId').val());
			        }
			        return event.keyCode != 13;
			    });
			});
			
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-59451715-1','auto');ga('send','pageview');
            
        </script>
	</body>
</html>